import{a as T}from"./chunk-L3QPFFUL.js";import{a as Y}from"./chunk-OTFRDS55.js";import{b as j,c as f,d as A,e as Q,f as q,g as k,h as L,i as G,k as H,l as D,m as z,n as R,o as $,r as W,s as U}from"./chunk-UFPJ4GYC.js";import"./chunk-OKAOL6XJ.js";import{$a as m,Ba as i,Cb as M,Db as O,Eb as I,Hb as V,Ja as C,Na as h,Ta as c,Ua as B,Xa as r,Y as u,Ya as o,Z as g,Za as b,_a as y,a as w,ab as p,b as v,db as n,eb as _,fb as x,hb as N,ib as S,jb as F,lb as P,mb as E}from"./chunk-PDUJVWJ6.js";var Z=(l,t)=>({"bg-primary text-background-dark font-bold shadow-lg shadow-primary/20":l,"bg-surface-light dark:bg-surface-dark border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-medium":t}),ee=(l,t,e)=>({"bg-green-600":l,"bg-orange-500":t,"bg-red-600":e});function te(l,t){if(l&1){let e=y();r(0,"button",15),m("click",function(){let s=u(e).$implicit,d=p();return g(d.filterCategory(s))}),n(1),o()}if(l&2){let e=t.$implicit,a=p();c("ngClass",P(2,Z,a.selectedCategory===e,a.selectedCategory!==e)),i(),x(" ",e," ")}}function oe(l,t){if(l&1){let e=y();r(0,"div",16)(1,"div",17)(2,"mat-icon",18),n(3,"book"),o()(),r(4,"div",19)(5,"div")(6,"div",20)(7,"h3",21),n(8),o(),r(9,"span",22),n(10),o()(),r(11,"div",23)(12,"span",24),n(13,"Quantity"),o(),r(14,"div",25)(15,"button",26),m("click",function(){let s=u(e).index,d=p();return g(d.decreaseStock(s))}),r(16,"mat-icon"),n(17,"remove"),o()(),b(18,"input",27),r(19,"button",28),m("click",function(){let s=u(e).index,d=p();return g(d.increaseStock(s))}),r(20,"mat-icon"),n(21,"add"),o()()()(),r(22,"p",29),n(23),o(),r(24,"p",30),n(25),o()(),r(26,"div",31)(27,"span",32),n(28),o(),r(29,"span",33),n(30),o()()(),r(31,"div")(32,"button",34),m("click",function(){let s=u(e),d=s.$implicit,K=s.index,X=p();return g(X.openEdit(d,K))}),r(33,"mat-icon"),n(34,"edit"),o()()()()}if(l&2){let e=t.$implicit;i(8),_(e.title),i(2),x("$ ",e.price.toFixed(2),""),i(4),B("background-color","var(--background_color)"),i(),c("disabled",e.stock===0),i(3),c("value",e.stock),i(5),_(e.authors.join(", ")),i(2),x("ISBN: ",e.isbn,""),i(2),c("ngClass",E(11,ee,e.stock>10,e.stock>0&&e.stock<=10,e.stock===0)),i(),x(" ",e.stock," in Stock "),i(2),x(" ",e.category," ")}}function re(l,t){if(l&1&&(r(0,"option",55),n(1),o()),l&2){let e=t.$implicit;c("value",e)("disabled",e==="All"),i(),_(e)}}function ie(l,t){if(l&1){let e=y();r(0,"div",35),m("click",function(){u(e);let s=p();return g(s.closeForm())}),r(1,"section",36)(2,"form",37),m("ngSubmit",function(){u(e);let s=p();return g(s.getValues())})("click",function(s){return u(e),g(s.stopPropagation())}),r(3,"div",38)(4,"label",39),n(5,"Book Name"),o(),b(6,"input",40)(7,"app-errormsg",41),o(),r(8,"div",38)(9,"label",39),n(10,"authorName"),o(),b(11,"input",42)(12,"app-errormsg",43),o(),r(13,"div",38)(14,"label",39),n(15,"Category"),o(),r(16,"select",44)(17,"option",45),n(18,"Select category"),o(),h(19,re,2,3,"option",46),o(),b(20,"app-errormsg",47),o(),r(21,"div",38)(22,"label",39),n(23,"Quantity"),o(),b(24,"input",48)(25,"app-errormsg",49),o(),r(26,"div",38)(27,"label",39),n(28,"Publisher"),o(),b(29,"input",50)(30,"app-errormsg",51),o(),r(31,"div",38)(32,"label",39),n(33,"Price"),o(),b(34,"input",52)(35,"app-errormsg",53),o(),r(36,"button",54),n(37,`
Submit
`),o()()()()}if(l&2){let e=p();i(2),c("formGroup",e.NewBookForm),i(5),c("control",e.NewBookForm.get("Bookname")),i(5),c("control",e.NewBookForm.get("authorName")),i(7),c("ngForOf",e.categories),i(),c("control",e.NewBookForm.get("Category")),i(5),c("control",e.NewBookForm.get("Quantity")),i(5),c("control",e.NewBookForm.get("Publisher")),i(5),c("control",e.NewBookForm.get("Price")),i(),c("disabled",e.NewBookForm.invalid)}}var J=class l{searchQuery="";selectedCategory="All";categories=["All","Science","Art","Religion","History","Geography"];editingIndex=null;showNewBookForm=!1;books=[{isbn:"978-0553380163",title:"A Brief History of Time",authors:["Stephen Hawking"],publisher:"Bantam",year:1988,price:12.99,category:"Science",stock:24,threshold:5},{isbn:"978-0062316097",title:"Sapiens",authors:["Yuval Noah Harari"],publisher:"Harper",year:2011,price:14.99,category:"History",stock:3,threshold:5}];filteredBooks=[...this.books];NewBookForm=new q({Bookname:new k("",f.required),authorName:new k("",f.required),Category:new k("",f.required),Quantity:new k(0,f.required),Publisher:new k("",f.required),Price:new k(0,f.required)});openForm(){this.showNewBookForm=!0}closeForm(){this.showNewBookForm=!1}openEdit(t,e){this.editingIndex=e,this.NewBookForm.patchValue({Bookname:t.title,authorName:t.authors.join(", "),Category:t.category,Quantity:t.stock,Publisher:t.publisher,Price:t.price}),this.showNewBookForm=!0}getValues(){if(this.NewBookForm.markAllAsTouched(),this.NewBookForm.invalid)return;let t=this.NewBookForm.value.Quantity;if(this.editingIndex!==null){if(t<0)return;this.books[this.editingIndex]=v(w({},this.books[this.editingIndex]),{title:this.NewBookForm.value.Bookname,authors:this.NewBookForm.value.authorName.split(","),category:this.NewBookForm.get("Category")?.value,stock:t,publisher:this.NewBookForm.value.Publisher,price:this.NewBookForm.value.Price})}else this.books.push({isbn:crypto.randomUUID(),title:this.NewBookForm.value.Bookname,authors:this.NewBookForm.value.authorName.split(","),publisher:this.NewBookForm.value.Publisher,year:new Date().getFullYear(),price:this.NewBookForm.value.Price,category:this.NewBookForm.get("Category")?.value,stock:t,threshold:10});this.filteredBooks=[...this.books],this.closeForm()}filterBooks(){this.filteredBooks=this.books.filter(t=>(t.title.toLowerCase().includes(this.searchQuery.toLowerCase())||t.authors.join(" ").toLowerCase().includes(this.searchQuery.toLowerCase())||t.isbn.includes(this.searchQuery))&&(this.selectedCategory==="All"||t.category===this.selectedCategory))}filterCategory(t){this.selectedCategory=t,this.filterBooks()}increaseStock(t){this.books[t].stock++,this.filterBooks()}decreaseStock(t){this.books[t].stock>0&&this.books[t].stock--,this.filterBooks()}sortByLowestStock(){this.filteredBooks=[...this.filteredBooks].sort((t,e)=>t.stock-e.stock)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=C({type:l,selectors:[["app-books"]],decls:20,vars:4,consts:[[1,"opacity-100"],[1,"flex","flex-col","gap-4","p-4","z-20"],[1,"relative","group"],["type","text",1,"block","w-full","p-3","pr-10","text-sm","rounded-lg","bg-surface-light","dark:bg-surface-dark","border","border-slate-300","dark:border-slate-700","placeholder-transparent","focus:border-primary","focus:ring-primary","dark:focus:border-primary","dark:focus:ring-primary","focus:outline-none","shadow-sm","transition-all",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],[1,"text-slate-400","group-focus-within:text-primary","transition-colors","text-base"],[1,"flex","gap-2","overflow-x-auto","no-scrollbar","pb-1"],["class","flex h-9 shrink-0 items-center justify-center px-4 rounded-full",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","justify-end","px-4","pb-2"],[1,"flex","items-center","gap-1","px-3","py-1","rounded-full","text-sm","font-medium","bg-surface-light","dark:bg-surface-dark","border","border-slate-300","dark:border-slate-700","text-slate-700","dark:text-white","hover:bg-primary","hover:text-white","transition-colors",3,"click"],[1,"text-base"],[1,"flex","flex-col","gap-3","px-4"],["class","relative group flex items-start gap-4 p-3 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-300 dark:border-slate-700 shadow-sm transition-all hover:scale-[1.01]",4,"ngFor","ngForOf"],[1,"addbtn","text-[30px]","z-50","text-slate-400","hover:text-primary","text-sm",3,"click"],["class","fixed fade inset-0 z-50 bg-black/50 overflow-y-auto fade",3,"click",4,"ngIf"],[1,"flex","h-9","shrink-0","items-center","justify-center","px-4","rounded-full",3,"click","ngClass"],[1,"relative","group","flex","items-start","gap-4","p-3","bg-surface-light","dark:bg-surface-dark","rounded-xl","border","border-slate-300","dark:border-slate-700","shadow-sm","transition-all","hover:scale-[1.01]"],[1,"shrink-0","w-20","h-28","rounded-lg","bg-slate-200","dark:bg-slate-700","flex","items-center","justify-center","text-slate-500","dark:text-slate-300","text-lg"],[1,"text-slate-400","dark:text-slate-400"],[1,"flex-1","min-w-0","flex","flex-col","h-full","justify-between","py-0.5"],[1,"flex","justify-between","items-start"],[1,"text-base","font-bold","leading-tight","line-clamp-2","pr-6","text-slate-900","dark:text-white"],[1,"text-sm","font-semibold","text-slate-900","dark:text-white","mr-5"],[1,"flex","items-center","justify-center","gap-2","mt-2","flex-wrap","max-w-sm"],[1,"text-xs","font-medium","text-slate-500","dark:text-slate-400","mr-2"],[1,"flex","items-center","justify-center","gap-1","rounded-lg","p-1","border","flex-shrink"],[1,"qntbtn",3,"click","disabled"],["readonly","",1,"txt","w-5","text-center","bg-transparent","font-bold","text-sm","text-slate-900","dark:text-white","border-none","focus:ring-0","p-0",3,"value"],[1,"qntbtn",3,"click"],[1,"text-xs","text-slate-500","dark:text-slate-400","mt-1","font-medium"],[1,"text-[10px]","text-slate-400","dark:text-slate-500","mt-0.5","font-mono"],[1,"flex","items-center","gap-2","mt-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-[10px]","font-bold","text-white",3,"ngClass"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-[10px]","font-bold","bg-white","text-black","catgory"],[1,"editbtn","text-slate-400","hover:text-primary",3,"click"],[1,"fixed","fade","inset-0","z-50","bg-black/50","overflow-y-auto","fade",3,"click"],[1,"pt-5"],[1,"max-w-sm","mx-auto","mt-5","p-6","rounded-lg","shadow-lg","NewBookForm","shadow-t-4","shadow-cyan-300","border-solid","border-slate-500","m-5",3,"ngSubmit","click","formGroup"],[1,"mb-5"],[1,"block","mb-2","text-sm","font-medium"],["formControlName","Bookname",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5"],["label","Book Name",3,"control"],["formControlName","authorName",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5"],["label","Author Name",3,"control"],["formControlName","Category",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","text-black","p-2.5"],["value","","disabled","","selected",""],[3,"value","disabled",4,"ngFor","ngForOf"],["label","Category",3,"control"],["formControlName","Quantity",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5"],["label","Quantity",3,"control"],["formControlName","Publisher",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5"],["label","Publisher",3,"control"],["formControlName","Price",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5"],["label","Price",3,"control"],["type","submit",1,"w-full","px-5","py-2.5","text-sm","font-medium","rounded-lg","text-white","bg-green-600","disabled:bg-gray-400","disabled:opacity-70","disabled:cursor-not-allowed",3,"disabled"],[3,"value","disabled"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),F("ngModelChange",function(d){return S(a.searchQuery,d)||(a.searchQuery=d),d}),m("input",function(){return a.filterBooks()}),o(),r(4,"div",4)(5,"mat-icon",5),n(6,"search"),o()()(),r(7,"div",6),h(8,te,2,5,"button",7),o()(),r(9,"div",8)(10,"button",9),m("click",function(){return a.sortByLowestStock()}),r(11,"mat-icon",10),n(12,"sort"),o(),n(13," Sort by Lowest Stock "),o()(),r(14,"div",11),h(15,oe,35,15,"div",12),o()(),r(16,"button",13),m("click",function(){return a.openForm()}),r(17,"mat-icon"),n(18,"add"),o()(),h(19,ie,38,9,"div",14)),e&2&&(i(3),N("ngModel",a.searchQuery),i(5),c("ngForOf",a.categories),i(7),c("ngForOf",a.filteredBooks),i(4),c("ngIf",a.showNewBookForm))},dependencies:[V,M,O,I,W,G,R,$,j,z,A,Q,L,T,U,H,D,Y],styles:[".catgory[_ngcontent-%COMP%]{color:#000!important}.addbtn[_ngcontent-%COMP%]{position:fixed;bottom:5px;right:5px;height:50px;width:50px;display:flex;align-items:center;justify-content:center;border-radius:50%}.editbtn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.editbtn[_ngcontent-%COMP%]{position:absolute;cursor:pointer;border-radius:50%;width:30px;height:30px;padding:4px;transition:background-color .3s ease}.fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .25s}.editbtn[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px}.icon[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;justify-self:center;align-items:center;text-align:center;font-size:10px}.qntbtn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background-color:var(--secondary_color);color:var(--foreground_color);padding:0}.txt[_ngcontent-%COMP%]{max-width:70px;color:var(--foreground_color)}.qntbtn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:16px;width:100%;height:100%;line-height:1}.qntbtn[_ngcontent-%COMP%]:hover{background-color:var(--hover_color)}.addbtn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.NewBookForm[_ngcontent-%COMP%]{background-color:var(--background_color)}.addbtn[_ngcontent-%COMP%]:hover{background-color:#7fcece}.fade[_ngcontent-%COMP%]{transition:opacity .25s ease;animation:_ngcontent-%COMP%_fadeIn .25s ease forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]})};export{J as BooksComponent};
